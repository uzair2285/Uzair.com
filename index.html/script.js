let questions = [
    {
        question: "The size of most phage viruses range up to:",
        options: ["100 nm", "200 nm", "500 nm", "4 to 6 μm"],
        answer: "A"
    },
    {
        question: "The viral envelope of HIV is made up of:",
        options: ["Glycolipid", "Glycoprotein", "Lipoprotein", "Nucleoprotein"],
        answer: "B"
    },
    {
        question: "Which enzyme attaches viral DNA with host DNA?",
        options: ["Reverse transcriptase", "Protease", "Restriction enzyme", "None"],
        answer: "A"
    },
    {
        question: "The spikes that project out from HIV are made up of:",
        options: ["Gp24 and gp120", "Gp120 and gp17", "Gp24 and gp17", "Gp120 and gp41"],
        answer: "D"
    },
    {
        question: "HIV attacks on:",
        options: ["Lymphocytes", "RBC", "T-cell", "B-cell"],
        answer: "C"
    },
    {
        question: "Match the columns.",
        options: [
            "a-2, b-5, c-3, d-1",
            "a-5, b-1, c-4, d-2",
            "a-3, b-1, c-4, d-2",
            "a-5, b-3, c-1, d-2"
        ],
        answer: "B"
    },
    {
        question: "How many molecules of NADH are produced when molecules of phosphoglyceraldehyde are converted into four molecules of Pyruvate?",
        options: ["2", "6", "8", "4"],
        answer: "B"
    },
    {
        question: "Photosystem I has chlorophyll a molecules which absorb maximum light of:",
        options: ["680 nm", "700 nm", "780 nm", "580 nm"],
        answer: "B"
    },
    {
        question: "A specific function of light in the process of photosynthesis is:",
        options: ["Reduction of CO₂", "Activate other molecules", "Split water molecules", "None of the above"],
        answer: "C"
    },
    {
        question: "Calvin cycle involves:",
        options: ["Oxidative carboxylation", "Reductive carboxylation", "Phosphorylation", "Oxidative phosphorylation"],
        answer: "B"
    },
    {
        question: "The wavelengths of light absorbed by chlorophylls are mainly violet-blue and:",
        options: ["Orange-red", "Orange-yellow", "Yellow-red", "Infra-red"],
        answer: "A"
    },
    {
        question: "The carotenes are red to:",
        options: ["Blue", "Yellow", "Orange", "Green"],
        answer: "C"
    },
    {
        question: "On entering the mitochondrion unites with coenzyme-A (CoA) to form acetyl CoA:",
        options: ["Glucose", "Pyruvic acid", "Lactic acid", "Pyruvate"],
        answer: "D"
    },
    {
        question: "Glycosidic linkage in maltose is",
        options: ["4 → 1", "4 → 1", "1 → 4", "1 → 4"],
        answer: "C"
    },
    {
        question: "Macromolecule chitin is",
        options: ["Sulphur containing polysaccharide", "Phosphorus containing polysaccharide", "Nitrogen containing polysaccharide", "Simple polysaccharide"],
        answer: "C"
    },
    {
        question: "The following molecule represents a simplest sugar",
        options: ["Fructose", "Sucrose", "Ager", "G3P"],
        answer: "A"
    },
    {
        question: "The distinctive characteristic and functional groups of fats is",
        options: ["Ketone", "Alcohol", "Peptide", "Ester"],
        answer: "D"
    },
    {
        question: "Which graph represents the changes in substrate concentration during the course of an enzyme catalyzed reaction?",
        options: ["A", "B", "C", "D"],
        answer: "A"
    },
    {
        question: "Vegetable oils are",
        options: [
            "Sodium salts of higher fatty acids",
            "Mixture of sodium and potassium salts of higher fatty acids",
            "Potassium salts of higher fatty acids",
            "Glycerides of fatty acids"
        ],
        answer: "D"
    },
    {
        question: "Which is not bounded by a membrane?",
        options: ["Plastid", "Mitochondrion", "Nucleus", "Centriole"],
        answer: "D"
    },
    {
        question: "What is true of fluid mosaic model?",
        options: [
            "Phospholipid bilayer is present over protein layer",
            "Protein embedded in phospholipid bilayer",
            "Phospholipid monolayer is present over protein layer",
            "Phospholipid layer is sandwiched between two protein layers"
        ],
        answer: "B"
    },
    {
        question: "Fluidity of cell membranes increase by",
        options: [
            "Increasing the proportion of integral proteins",
            "Increasing number of phospholipids with unsaturated hydrocarbon tails",
            "Decreasing concentration of cholesterol in membrane",
            "Increasing the number of phospholipids with saturated hydrocarbon tails"
        ],
        answer: "B"
    },
    {
        question: "Many cells function properly and divide mitotically even though they do not have",
        options: ["Plasma membrane", "Cytoskeleton", "Mitochondria", "Plastids"],
        answer: "C"
    },
    {
        question: "Each fat molecule is formed from",
        options: [
            "Three glycerol molecules and three fatty acid molecules",
            "One glycerol molecule and one fatty acid molecule",
            "One glycerol molecule and three fatty acid molecules",
            "Three glycerol molecules and one fatty acid molecule"
        ],
        answer: "C"
    },
    {
        question: "Plant cells synthesize sugar in the:",
        options: ["Thylakoid", "Grana", "Stroma", "Crista"],
        answer: "C"
    },
    {
        question: "The attachment of two subunits of ribosomes on a single mRNA is controlled by:",
        options: ["Sodium ions", "Calcium ions", "Potassium ions", "Magnesium ions"],
        answer: "D"
    },
    {
        question: "The size of ribosome in prokaryotic cell is:",
        options: ["40S", "60S", "70S", "80S"],
        answer: "C"
    },
    {
        question: "The cell organelle which is present in animal cell but not in higher plant cell:",
        options: ["Plastids", "Centriole", "Mitochondria", "Nucleolus"],
        answer: "B"
    },
    {
        question: "The special proteins which carry lipid-insoluble large molecules through pores of plasma membrane are called:",
        options: ["Permeases", "Catalases", "Arginases", "Amylases"],
        answer: "A"
    },
    {
        question: "Which one of the following is found only in plant cells?",
        options: ["Peroxisomes", "Lysosome", "Glyoxysome", "Ribosome"],
        answer: "C"
    },
    {
        question: "The growth and reproduction of eukaryotic cell is dependent upon its:",
        options: ["Cytoplasm", "Nucleus", "Vacuoles", "Nuclear pores"],
        answer: "B"
    },
    {
        question: "Which controls reflex action?",
        options: [
            "Central nervous system",
            "Parasympathetic nervous system",
            "Sympathetic nervous system",
            "Sensory nerves"
        ],
        answer: "A"
    },
    {
        question: "Primary function of myelin sheath around vertebrate axon is to:",
        options: [
            "Regulate Na-K pump",
            "Increases in size of action potential",
            "Increases in speed of conduction by preventing leakage of nerve impulse",
            "Deactivate the release of neurotransmitter"
        ],
        answer: "C"
    },
    {
        question: "The process that occurs during repolarization of nerve fibers are:",
        options: ["ii and iii", "ii and iv", "i and iii", "i and iii"],
        answer: "B"
    },
    {
        question: "An acoelomate animal with bilateral symmetry is",
        options: ["Jellyfish", "Liver fluke", "Crab", "Roundworm"],
        answer: "B"
    },
    {
        question: "A bilaterally symmetrical deuterostome is classified in the phylum",
        options: ["Annelida", "Chordate", "Arthropoda", "Echinodermata"],
        answer: "B"
    },
    {
        question: "A phylum with triploblastic acoelomate animals is",
        options: ["Platyhelminthes", "Aschelminths", "Annelida", "Arthropoda"],
        answer: "A"
    },
{
        question: "Choose the correct combination.",
        options: [
            "Annelida and Porifera — phyla",
            "Oligochaeta and Arthropoda — phyla",
            "Mollusca and Hydrozoa — classes",
            "Aves and Chordate — classes"
        ],
        answer: "A"
    },
    {
        question: "Which one of the following has an excretory system consisting of branching tubes, ending in bulb-like cells called 'Flame cells'?",
        options: ["Liver fluke", "Cockroach", "Leech", "Ascaris"],
        answer: "A"
    },
    {
        question: "Which is not an example of Platyhelminthes?",
        options: ["Dugesia sp", "Fasciola sp", "Taenia sp", "Enterobius sp"],
        answer: "D"
    },
    {
        question: "Lamarck reasoned about the evolved neck of the giraffes as the ______ of a great many generations of ancestors stretching higher and higher.",
        options: ["Combined effort", "Selective effort", "Evolutionary product", "Cumulative product"],
        answer: "D"
    },
    {
        question: "According to Lamarck, evolution is towards:",
        options: ["Increase in size", "Decrease in complexity", "Decrease in size", "Both 'a' & 'b'"],
        answer: "A"
    },
    {
        question: "“An organism can pass on characteristics that it acquired during its lifetime to its offspring.” This idea is:",
        options: ["Inheritance of acquired characters", "Darwinism", "Lamarckism", "Both 'a' & 'c'"],
        answer: "D"
    },
    {
        question: "Key point of Lamarck’s view about organic evolution is that every offspring",
        options: ["is similar to its parents", "Shows struggle for existence", "Inherits characters acquired by the parental generation", "Repeats phylogeny in its ontogeny"],
        answer: "C"
    },
    {
        question: "Which is related to evolution?",
        options: ["Reproduction", "Variations", "Competition", "Extinction"],
        answer: "B"
    },
    {
        question: "Fatty acids and glycerol are first absorbed by:",
        options: ["Lymph vessel", "Villi", "Blood capillaries", "Hepatic portal vein"],
        answer: "A"
    },
    {
        question: "On removal of pancreas, the compound that remains undigested is:",
        options: ["Protein", "Fat", "Glucose", "Lactose"],
        answer: "B"
    },
    {
        question: "Enzyme trypsinogen is changed to trypsin by:",
        options: ["Gastrin", "Enterokinase", "Secretin", "Hydrochloric acid"],
        answer: "B"
    },
    {
        question: "Casparian strips are present in:",
        options: ["Cortex cells of roots", "Cells of pericycle", "Endodermal cells of roots", "Phloem"],
        answer: "C"
    },
    {
        question: "According to pressure flow theory, which cannot serve as a sink?",
        options: ["Leaves", "Roots", "Stem", "All can serve as sink"],
        answer: "A"
    },
    {
        question: "A major similarity between active transport and facilitated diffusion is that:",
        options: ["Both consume ATP", "Both are passive", "Both are non-selective", "Both require membrane proteins"],
        answer: "D"
    }
];
  
  
  
  
  
  
  
  
  
  


let currentQuestionIndex = 0;
let score = 0;
let username = "";
let selectedAnswers = Array(questions.length).fill(null);
let profileImageData = ""; // To store image data as base64

// Start Quiz Function
function startQuiz() {
  username = document.getElementById("username").value;
  if (!username) {
    alert("Please enter your name to start the quiz.");
    return;
  }

  document.getElementById("loginSection").style.display = "none";
  document.getElementById("quizSection").style.display = "block";
  showQuestion();
}

// Preview Image Function
function previewImage(event) {
  const file = event.target.files[0];
  const reader = new FileReader();
  reader.onload = function() {
    profileImageData = reader.result;
    document.getElementById("resultImage").src = profileImageData;
    document.getElementById("resultImage").style.display = "block";
  };
  if (file) {
    reader.readAsDataURL(file);
  }
}

function showQuestion() {
  const questionObj = questions[currentQuestionIndex];
  document.getElementById("question").innerText = questionObj.question;
  const optionsDiv = document.getElementById("options");
  optionsDiv.innerHTML = "";

  questionObj.options.forEach((option, index) => {
    const optionDiv = document.createElement("div");
    optionDiv.classList.add("option");
    optionDiv.innerText = option;

    if (selectedAnswers[currentQuestionIndex] === option) {
      optionDiv.classList.add("selected");
    }

    optionDiv.onclick = function() {
      selectOption(optionDiv, option);
    };
   
    optionsDiv.appendChild(optionDiv);
  });

  document.getElementById("nextButton").style.display = currentQuestionIndex < questions.length - 1 ? "inline-block" : "none";
  document.getElementById("submitButton").style.display = currentQuestionIndex === questions.length - 1 ? "inline-block" : "none";
}

function selectOption(optionDiv, selectedOption) {
  document.querySelectorAll(".option").forEach(option => option.classList.remove("selected"));
  optionDiv.classList.add("selected");
  selectedAnswers[currentQuestionIndex] = selectedOption;
}

function nextQuestion() {
  currentQuestionIndex++;
  showQuestion();
}

function displayResult() {
  score = selectedAnswers.reduce((total, answer, index) =>
    answer === questions[index].answer ? total + 1 : total, 0);

  document.getElementById("quizSection").style.display = "none";
  document.getElementById("resultSection").style.display = "block";

  const totalQuestions = questions.length;
  const percentageScore = (score / totalQuestions) * 100;

  let resultMessage = '';
  if (percentageScore >= 50) {
    resultMessage = `Congratulations, ${username}! You scored ${score} out of ${totalQuestions} (${percentageScore.toFixed(0)}%). Keep up the great work!`;
  } else {
    resultMessage = `Don't worry, ${username}! You scored ${score} out of ${totalQuestions} (${percentageScore.toFixed(0)}%). Try again to improve your score!`;
  }

  document.getElementById("result").innerHTML = resultMessage;
}




function downloadResult() {
  const resultSection = document.getElementById("resultSection");
 
  // Get the result message
  const resultMessage = document.getElementById("result").innerText;
 
  // Prepare the content to download
  const content = `Result Card for ${username}\n\n${resultMessage}`;
 
  // Create a Blob from the content
  const blob = new Blob([content], { type: "text/plain;charset=utf-8" });
 
  // Create a download link
  const downloadLink = document.createElement("a");
  downloadLink.href = URL.createObjectURL(blob);
  downloadLink.download = `${username}_Result.txt`;
 
  // Append the link to the document and trigger a click
  document.body.appendChild(downloadLink);
  downloadLink.click();
 
  // Clean up by removing the link
  document.body.removeChild(downloadLink);
}